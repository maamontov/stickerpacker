name: Deploy
run-name: ğŸš€ Deploy
on:
  push:
    branches:
      - main
jobs:
  Pulling:
    name: ğŸ“¥ Pulling updates
    runs-on: self-hosted
    steps:
      - name: ğŸ—‚ï¸ Check out repository code
        uses: actions/checkout@v4
      - name: âš™ï¸ Run test container
        run: docker compose -p actions-stickerpacker up --build -d

  Linting:
    name: ğŸ”® Linting
    runs-on: self-hosted
    steps:
      - name: ğŸ“‹ Ruff check
        run: docker compose exec poetry run ruff check

  Run:
    name: ğŸ Run
    runs-on: self-hosted
    steps:
      - name: ğŸ“¦ Run container
        run: docker compose up --build -d
